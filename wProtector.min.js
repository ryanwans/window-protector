/*
 * Window Protector by Ryan Wans
 * Copyright (c) 2020 Ryan Wans Development. All rights reserved.
 * Licensed under the MIT Software License
 */

!function(t,e,o){"use strict";window.protect=window.protect||{},window.protect.verbose=[],"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("windowProtector requires a window with a document");return e(t)}:e(t),void 0===window.jQuery?window.protect.jQuery=!1:window.protect.jQuery=!0,window.protect.jQuery||console.warn("windowProtector running without jQuery enabled"),window.protect.version="v2020.4.2.8",window.protect.defaults={tryJQFirst:!0,eventName:"wP-broken",bind:window.document,delay:300,tFTEWARF:!1,window:this,windowState:Date.now()},window.protect.err=(t=>{console.warn("[wProtect] Error: "+t)}),window.protect.info=(t=>{console.log("[wProtect] Info: "+t)}),o(window.protect)}(this,function(t){try{window.protect.verbose.push(t)}catch(t){}},t=>{"use strict";function e(t){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=o.length,n=0;n<t;n++)e+=o.charAt(Math.floor(Math.random()*i));return e}function o(t){for(var e="",o="abcdefghijklmnopqrstuvwxyz0123456789-----",i=o.length,n=0;n<t;n++)e+=o.charAt(Math.floor(Math.random()*i));return e}var i=[],n=(this.document,Object.getPrototypeOf,i.slice,i.concat,i.push,i.indexOf,{}),r=(n.toString,n.hasOwnProperty,window.protect.err),s=window.protect.info;window.Protector=function(e){this.f=e,this.callback=e,window.protect.callback=this.callback,this.fired=!1,this.killed=0,this.focusHistory=[],this.pollingCount=0;var o=this;this.triggerFunction=this.f,"function"!=typeof this.f&&r("Parameter must be a function (callback)"),this.init=(t=>{"object"!=typeof t?r("You should initialize Protector with a json parameter"):this.o=t,"function"!=typeof f?r("Invalid or missing parameters upon creating Protector object"):s("Initialization successful.")}),this.defaultFocus=!0,this.focus=document.hasFocus(),this.createEvent=(e=>{this._event=new CustomEvent(t.defaults.eventName,{detail:e}),window.protect._init_=this._event,t.defaults.bind.addEventListener(t.defaults.eventName,this.broken,0)}),this.broken=function(){window.protect._init_.detail._listenerEnd=Date.now(),window.protect._init_.detail.totalDuration=window.protect._init_.detail._listenerEnd-window.protect._init_.detail._listenerStart,window.protect.callback(window.protect._init_.detail),this.fired=!0,s("Event loop broken; enacting callback...")},this.break=function(){t.defaults.bind.dispatchEvent(this._event),n.snapped=1,this.destroyPolling({auth:"2374e23h64q623ie4hyi2q4hy6i8273h6e4i823764i783"}),o.killed=1},this.start=function(t){if(void 0===t)t={};t._listenerStart=Date.now(),this.createEvent(t),this.enactPolling(),s("Listener has been started.")},this.destroyPolling=(t=>{void 0===t||"object"!=typeof t?r("Bruh you failed terribly, atleast try to authenticate next time loser."):"2374e23h64q623ie4hyi2q4hy6i8273h6e4i823764i783"==t.auth?o.focusHistory.length>0?o.fired?1==n.snapped?($(window).blur(()=>{}),$(window).focus(()=>{}),$(window).off("focus"),$(window).off("blur"),window.onfocus=null):r("UNAUTHORIZED DESTROY EVENT DETECTED! [4]"):r("UNAUTHORIZED DESTROY EVENT DETECTED! [3]"):r("UNAUTHORIZED DESTROY EVENT DETECTED! [2]"):r("UNAUTHORIZED DESTROY EVENT DETECTED! [1]")}),this.enactPolling=(()=>{t.defaults.tryJQFirst&&t.jQuery&&($(window).blur(function(){r("Window has lost focus. (m_jq_version4)"),o.fired=!0,o.focusHistory.push(0),o.break()}),$(window).focus(function(){r("Window has regained focus.")}));var e=setInterval(function(){document.hasFocus()||o.fired||(r("Window has lost focus. (m_poll_verion4)"),o.fired=!0,o.focusHistory.push(0),o.break(),clearInterval(e)),o.pollingCount++},t.defaults.delay);window.onfocus=(()=>{r("Window has regained focus(?)"),o.focusHistory.length>0&&!o.killed&&(r("Determined that focus was broken and refocussed (m_focus_version4)"),o.fired=!0,o.focusHistory.push(0),o.break(),clearInterval(e))})}),this.telemetry=function(t){if("object"!=typeof t)return!1;var e=new XMLHttpRequest,o="https://ryanwans.com/api/ported/version3/wProtector-API/telemetryEnd/post";t.timecode=Date.now(),e.onreadystatechange=(()=>{4==e.readyState&&200==e.status?i.push(e.response):s("Awaiting async poll response...")}),e.responseType="json",e.open("POST",o,!0),e.send(JSON.stringify(t))}},window.wProtect={autoUpdate:()=>{window.wProtect.updateSpotted&&(window.Protector=null,r("Critical info has deemed this version as old or deprecated!"),r("Destroying data..."))},feed:()=>{console.error(o(100))},theme:["#fff","#000","#acacac"],thisID:o(50),crit:t=>{window.alert(t)}};var a=function(){var t=document.createElement("wProtector");t.setAttribute("wP_uuid_encoded",e(35)),t.setAttribute("hidden","true"),t.setAttribute("style","display:none;visibility:hidden;");var i=window.document.body;t.innerText=o(500),i.append(t)};t.jQuery?$(document).ready(function(){a()}):s("Having jQuery greatly increases performance of this plugin."),s("wProtector has fully rendered and initialized (t_code="+Date.now()+")")});
